{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '46511774-6d45b03e21a284b47c5b7e772';\n\naxios.defaults.baseURL = 'https://pixabay.com/api/';\n\nconst getPhotos = (query, page) => {\n  return axios.get('', {\n    params: {\n      key: API_KEY,\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      per_page: 15,\n      page,\n    },\n  });\n};\n\nexport default getPhotos;\n","const gallery = document.querySelector('.gallery');\n\nconst createImageCard = ({\n  webformatURL,\n  largeImageURL,\n  tags,\n  likes,\n  views,\n  comments,\n  downloads,\n}) => `\n<li>\n  <a href=\"${largeImageURL}\">\n    <div class=\"image-container\">\n      <img class=\"image-preview\" src=\"${webformatURL}\" alt=\"${tags}\" />\n    </div>\n    <div class=\"card-description\">\n      <span class=\"attribute\"><span>Likes</span> ${likes}</span>\n      <span class=\"attribute\"><span>Views</span> ${views}</span>\n      <span class=\"attribute\"><span>Comments</span> ${comments}</span>\n      <span class=\"attribute\"><span>Downloads</span> ${downloads}</span>\n    </div>\n  </a>\n</li>\n  `;\n\nexport const renderImages = images => {\n  const cards = images.map(createImageCard).join('');\n\n  gallery.innerHTML = `<ul class=\"gallery-list\">${cards}</ul>`;\n};\n\nexport const addImages = images => {\n  const cards = images.map(createImageCard).join('');\n  const galleryList = document.querySelector('.gallery-list');\n\n  galleryList.insertAdjacentHTML('beforeend', cards);\n};\n\nexport const showLoadMoreButton = () => {\n  const loadMoreBtn = document.querySelector('.load-more');\n  loadMoreBtn.classList.remove('hidden');\n};\n\nexport const hideLoadMoreButton = () => {\n  const loadMoreBtn = document.querySelector('.load-more');\n  loadMoreBtn.classList.add('hidden');\n};\n\nexport const clearGallery = () => {\n  gallery.innerHTML = '';\n};\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport getPhotos from './js/pixabay-api.js';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { renderImages, clearGallery, showLoadMoreButton, hideLoadMoreButton, addImages } from './js/render-functions.js';\n\n\nconst simpleGallery = new SimpleLightbox('.gallery a', {\n  overlayOpacity: 0.8,\n  captions: true,\n  captionDelay: 250,\n  captionPosition: 'bottom',\n  captionType: 'attr',\n  captionsData: 'alt',\n});\n\nlet currPage = 1;\nlet query = '';\n\nconst searchForm = document.querySelector('.search-form');\nconst loadMoreBtn = document.querySelector('.load-more');\nconst loader = document.querySelector('#loader');\n\nconst submitHandler = async event => {\n  event.preventDefault();\n\n  const form = event.target;\n  const sumbittedQuery = form.elements.query.value.trim();\n\n  if (!sumbittedQuery) {\n    return;\n  } else if (query === sumbittedQuery) {\n    page += 1;\n  } else {\n    query = sumbittedQuery;\n    currPage = 1;\n  }\n\n    form.reset();\n    loader.classList.remove('hidden');\n\n  try {\n    const { data } = await getPhotos(query, currPage);\n\n    if (data.total === 0) {\n      hideLoadMoreButton()\n      throw new Error(\n        'Sorry, there are no images matching your search query. Please try again!'\n      );\n    } else {\n      renderImages(data.hits);\n    }\n\n    if (data.totalHits <= 15 * currPage) {\n      hideLoadMoreButton();\n      iziToast.info({\n        title: 'Info',\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n    } else {\n      showLoadMoreButton();\n    }\n\n    simpleGallery.refresh();\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: error.message,\n    });\n    clearGallery();\n  }\n\n  loader.classList.add('hidden');\n};\n\nsearchForm.addEventListener('submit', submitHandler);\n\nconst loadMoreHandler = async () => {\n  currPage += 1;\n  hideLoadMoreButton();\n  loader.classList.remove('hidden');\n\n  try {\n    const { data } = await getPhotos(query, currPage);\n\n    addImages(data.hits);\n    if (data.totalHits <= 15 * currPage) {\n      hideLoadMoreButton();\n      iziToast.info({\n        title: 'Info',\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n    } else {\n      showLoadMoreButton();\n    }\n    const card = document.querySelector('.gallery-list a');\n    const cardHeight = card.getBoundingClientRect().height;\n    window.scrollBy({\n      top: cardHeight * 2,\n      left: 0,\n      behavior: 'smooth',\n    });\n    simpleGallery.refresh();\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: error.message,\n    });\n    clearGallery();\n  }\n\n  loader.classList.add('hidden');\n};\n\nloadMoreBtn.addEventListener('click', loadMoreHandler);"],"names":["API_KEY","axios","getPhotos","query","page","gallery","createImageCard","webformatURL","largeImageURL","tags","likes","views","comments","downloads","renderImages","images","cards","addImages","showLoadMoreButton","hideLoadMoreButton","clearGallery","simpleGallery","SimpleLightbox","currPage","searchForm","loadMoreBtn","loader","submitHandler","event","form","sumbittedQuery","data","iziToast","error","loadMoreHandler","cardHeight"],"mappings":"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"}